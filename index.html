<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>中央广播电视总台亚太总站香港</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      padding: 20px;
      background: #f5f5f5;
      padding-bottom: 80px; /* 给底部控制栏留出空间 */
    }
    /* 容器：适配横竖屏，作为图片排版基准 */
    #image-container {
      position: relative;
      width: 100%;
      height: 80vh;
      border: 0px dashed #666;
      background: #fff;
      overflow: hidden;
      /* 横竖屏适配 */
      @media (orientation: landscape) {
        max-width: 1200px;
        margin: 0 auto;
      }
      @media (orientation: portrait) {
        height: 90vh;
      }
    }
    /* 图片样式：仅基础定位，尺寸/位置/层级全由JS配置 */
    .editable-img {
      position: absolute;
      transform-origin: top left; /* 关键：缩放/定位基准为左上角 */
      user-select: none;
      /* 移除默认尺寸，完全由JS控制 */
    }
    /* 圣诞文字动画样式（最顶层） */
    #christmas-text {
        /* 1. 绝对定位：基于父容器#image-container，而非屏幕 */
        position: absolute; 
        /* 2. 用百分比定位（核心！px会因屏幕分辨率偏差，%基于容器尺寸，跨设备一致） */
        top: 32%;    /* 示例：容器内顶部2%位置（可改，比如5%） */
        left: 35%;   /* 示例：容器内左侧2%位置（可改，比如5%） */
        /* 3. 移除translate偏移（避免叠加偏移导致位置偏差） */
        transform: none; 
        /* 4. 缩放原点仍保留，不影响位置，只影响动画缩放 */
        transform-origin: center; 
        /* 其他样式（动画、颜色、层级等）完全保留 */
        animation: fadeInScaleFadeOut 10s ease-in-out infinite;
        opacity: 0;
        z-index: 999;
        font-size: 36px;
        /* 移动端文字大小适配（只改尺寸，不改位置） */
        @media (max-width: 768px) {
          font-size: 24px; /* 仅缩小文字，位置百分比不变 */
        }
        color: #FFD700;
        font-weight: bold;
        white-space: nowrap;
        user-select: none;
    }
    
    /* 定义渐隐入+由小变大+渐隐出的关键帧动画 */
    @keyframes fadeInScaleFadeOut {
      0% {
        opacity: 0; /* 初始状态：完全透明（渐隐入准备） */
        transform: translate(0%, 0%) scale(0.6); /* 初始大小：50%（由小变大准备） */
      }
      50% {
        opacity: 1; /* 中间保持：完全显示 */
        transform: translate(0%, 0%) scale(1.2); /* 中间保持：原始大小 */
      }
      100% {
        opacity: 0; /* 渐隐出完成：完全透明 */
        transform: translate(0%, 0%) scale(1.6); /* 结束大小：保持原始大小 */
      }
    }

    /* 新增：音乐控制栏样式 */
    #music-control-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #333;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      z-index: 1000; /* 比圣诞文字更高，确保不被遮挡 */
    }
    /* 按钮样式 */
    .music-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      background: #FFD700;
      color: #333;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .music-btn:hover {
      background: #FFA500;
    }
    /* 音量滑块样式 */
    #volume-control {
      width: 120px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- 图片容器 -->
  <div id="image-container">
    <!-- 6张图片：仅保留基础结构，配置全在JS里 -->
    <img src="Myself.png" class="editable-img" id="img1" alt="图片1">
    <img src="Planing background.png" class="editable-img" id="img2" alt="图片2">
    <img src="MyCardChinese002.png" class="editable-img" id="img3" alt="图片3">
    <img src="MyCardEnglish002.png" class="editable-img" id="img4" alt="图片4">
    <img src="ChineseSenior.png" class="editable-img" id="img5" alt="图片5">
    <img src="EnglishSenior.png" class="editable-img" id="img6" alt="图片6">
    
    <!-- 圣诞文字层（最顶层） -->
    <div id="christmas-text">Happy Christmas</div>
  </div>

  <!-- 音频元素 -->
  <audio id="background-music" loop>
    <source src="JingleBells.mp3" type="audio/mpeg">
    您的浏览器不支持音频播放
  </audio>

  <!-- 新增：音乐控制按钮组 -->
  <div id="music-control-bar">
    <button class="music-btn" id="play-pause-btn">播放</button>
    <button class="music-btn" id="stop-btn">停止</button>
    <div>
      <label for="volume-control" style="color: #fff; font-size: 14px;">音量：</label>
      <input type="range" id="volume-control" min="0" max="1" step="0.1" value="1">
    </div>
  </div>

  <script>
    // ========== 核心配置区：所有参数可直接修改 ==========
    const container = document.getElementById('image-container');
    // 图片配置项：每张图的层级(zIndex)可自定义，其他由逻辑自动计算
    const imgConfigs = {
      img1: { zIndex: 1 }, // 层级数字越大，越在顶层
      img2: { zIndex: 2 },
      img3: { zIndex: 3 },
      img4: { zIndex: 4 },
      img5: { zIndex: 5 },
      img6: { zIndex: 6 }
    };
    // 圣诞文字配置项
    const christmasConfig = {
      left: '50%',    
      top: '50%',     
      fontSize: '36px',
      color: '#FFD700'
    };

    // ========== 圣诞文字初始化 ==========
    function initChristmasText() {
      const textEl = document.getElementById('christmas-text');
      // 删掉以下两行！！！（这是导致位置被覆盖的关键）
      // textEl.style.left = christmasConfig.left;
      // textEl.style.top = christmasConfig.top;
      // 保留其他样式设置（字体、颜色）
      textEl.style.fontSize = christmasConfig.fontSize;
      textEl.style.color = christmasConfig.color;
    }

    // ========== 核心逻辑：自动适配+左上角基准居中 ==========
    function initImages() {
      const imgElements = document.querySelectorAll('.editable-img');
      let loadedCount = 0;

      imgElements.forEach(img => {
        img.onload = function() {
          loadedCount++;
          if (loadedCount === imgElements.length) {
            layoutImages(imgElements);
          }
        };
        if (img.complete) img.onload();
      });
    }

    function layoutImages(imgElements) {
      const containerWidth = container.clientWidth;
      const containerHeight = container.clientHeight;

      imgElements.forEach(img => {
        const config = imgConfigs[img.id];
        const originalWidth = img.naturalWidth;
        const originalHeight = img.naturalHeight;

        const scaleX = containerWidth / originalWidth;
        const scaleY = containerHeight / originalHeight;
        const fitScale = Math.min(scaleX, scaleY, 1);

        img.style.width = `${originalWidth * fitScale}px`;
        img.style.height = `${originalHeight * fitScale}px`;
        const finalWidth = img.offsetWidth;
        const finalHeight = img.offsetHeight;

        const left = (containerWidth - finalWidth) / 2;
        const top = (containerHeight - finalHeight) / 2;

        img.style.left = `${left}px`;
        img.style.top = `${top}px`;
        img.style.zIndex = config.zIndex;
      });
    }

    // ========== 窗口适配 ==========
    window.addEventListener('resize', () => {
      initImages();
    });

    // ========== 音乐控制核心逻辑（新增+优化） ==========
    const music = document.getElementById('background-music');
    const playPauseBtn = document.getElementById('play-pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const volumeControl = document.getElementById('volume-control');

    // 初始化音乐（保留原有自动播放逻辑）
    function initMusic() {
      // 自动播放尝试
      music.play().catch(error => {
        console.log('自动播放失败，点击"播放"按钮手动播放:', error);
      });
      // 音量初始化（默认100%）
      music.volume = volumeControl.value;
    }

    // 播放/暂停切换
    playPauseBtn.addEventListener('click', () => {
      if (music.paused) {
        music.play();
        playPauseBtn.textContent = '暂停';
      } else {
        music.pause();
        playPauseBtn.textContent = '播放';
      }
    });

    // 停止播放（重置到开头并暂停）
    stopBtn.addEventListener('click', () => {
      music.pause();
      music.currentTime = 0; // 重置播放进度到开头
      playPauseBtn.textContent = '播放';
    });

    // 音量调节
    volumeControl.addEventListener('input', () => {
      music.volume = volumeControl.value;
    });

    // ========== 初始化执行 ==========
    initImages();
    initChristmasText();
    initMusic();

    // ========== 手动修改示例 ==========
    // document.getElementById('img1').style.left = '100px';
    // document.getElementById('img1').style.top = '50px';
    // document.getElementById('img2').style.width = '300px';
    // document.getElementById('img2').style.height = '200px';
    // document.getElementById('img3').style.zIndex = 10;
  </script>
</body>
</html>
